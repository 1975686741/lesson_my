# 前端性能优化最重要-- 缓存

- 静态资源缓存
    - 304 Not Modified

- 第一次访问某站时，200 成功访问 返回资源，花费时间较长
- 后面访问 走缓存

- node 的理解
    - 如何返回一个html模板？
        - 硬盘里fs 读出来 一个字符串
        - fs.readFile  异步的 不会阻塞node的eventloop
        - 同样硬件的能力下 多让一些用户访问 服务器价格便宜
        - index.js 在内存中运行 =》通过fs模块 IO操作 =》硬盘之中 =》回调函数 =》第一个参数是err（文件是否存在、路径名是否正确、固态硬盘和机械硬盘的区别），第二个参数是数据data
    - readFileSync 同步，不太常用，性能不好   常用readFile（）
    - 流的概念
        - 二进制文件的处理思想 
        - fs.createReadStream()

- 图片格式
    - JPG PNG(可透明，有透明通道)
    - WEBP 同样的清晰度下，体积只有二分之一甚至三分之一，它可让网页图档有效进行压缩，同时又不影响图片格式兼容与实际清晰度，进而让整体网页下载速度加快。

- 缓存 
    1. 服务器端要开启缓存  强缓存
          - 返回资源的同时，Expires   资源的过期时间 setHeader('Expires',时间)  
                本地缓存这个图片时，Expires 写入
          - 再次请求，前端缓存就挡道  有没有缓存  
                本地的时钟和缓存的 Expries 时间比较  
                时间没有到达 =》强制走缓存
          - 缺点：本地的时钟不准确 Expires 不准确
        - HTTP 1.1 更新 Cache-Control  使用相对时间
            - maxAge 倒计时
            
    2. 浏览器的本地文件系统