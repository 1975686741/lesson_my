# 跨域方案

- JSOP
    - script标签，不受跨域限制   
    - 缺点  只能GET请求，且无法处理错误信息
    - 服务器端返回js第三方代码  容易收到XSS 跨站脚本攻击

- CORS  设置SCSO Access-Control-Allow-Origin 
    - 设置 Access-Control-Allow-Method  多种方法
    - 支持所有类型的 HTTP 请求，安全性较高。多种方法
    - 缺点只能在后端设置，要服务器端配合实现，有些浏览器对 CORS 的支持不完整。

- postMessage   
    - html5 postMessage实现跨域消息通信
    1. 主页面通过window.open 或 iframe  启动一个他域的页面
    2. 消息通信 基于订阅发布者模式
          1. targetWindow.postMessage(mes, targetOrigin)
    3. 目标页面  addEventListener('message', )
          1. event.origin 白名单
          2. e.source.postMessage(msg, e.origin)
    - 缺点 默认要用户授权 知情权
  
- WebSocket HTML5 新增的协议 双工的 不是基于 HTTP 协议的 不受跨域限制
  - node要安装ws库   socket协议
    - 支持双向通信，可以实现实时更新数据。
    - 缺点    需要浏览器和服务器端都支持 WebSocket 协议。

- 代理  在服务器端设置代理接口将请求转发到目标地址，再将响应返回给客户端，绕开浏览器的同源策略
    - 优点   可以支持所有类型的 HTTP 请求，安全性较高。
    - 缺点    需要服务器端配合实现，会增加服务器端的负担。